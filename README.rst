===================================
darkFunction Editor to TexturePacker
===================================

Converts `darkFunction Editor <http://darkfunction.com/editor/>`_ sprite sheet animations format to `TexturePacker <www.codeandweb.com/texturepacker>`_ JSON format.

This format is ready to use in `Pixi <https://github.com/GoodBoyDigital/pixi.js>`_ and `Phaser <http://phaser.io/>`_.


Usage
=====

::

    python dfe_to_tp.py path/to/animation.anim path/to/save/to.json



Example
=======


barbarian.sprites::

    <?xml version="1.0"?>
    <!-- Generated by darkFunction Editor (www.darkfunction.com) -->
    <img name="barbarian.png" w="390" h="581">
      <definitions>
        <dir name="/">
          <dir name="stand">
            <spr name="0" x="0" y="0" w="32" h="62"/>
          </dir>
          <dir name="walk">
            <spr name="0" x="35" y="0" w="28" h="62"/>
            <spr name="1" x="66" y="0" w="27" h="62"/>
            <spr name="2" x="96" y="0" w="27" h="62"/>
          </dir>
          <dir name="crouch">
            <spr name="0" x="128" y="0" w="32" h="48"/>
          </dir>
          <dir name="attack_sword">
            <spr name="0" x="199" y="0" w="46" h="51"/>
            <spr name="1" x="248" y="0" w="48" h="48"/>
            <spr name="2" x="299" y="0" w="28" h="48"/>
            <spr name="3" x="330" y="0" w="29" h="48"/>
            <spr name="4" x="0" y="69" w="60" h="48"/>
          </dir>
        </dir>
      </definitions>
    </img>


barbarian.anim::
    <?xml version="1.0"?>
    <!-- Generated by darkFunction Editor (www.darkfunction.com) -->
    <animations spriteSheet="barbarian.sprites" ver="1.2">
      <anim name="stand" loops="0">
        <cell index="0" delay="1">
          <spr name="/stand/0" x="0" y="-31" z="0"/>
        </cell>
      </anim>
      <anim name="attack" loops="0">
        <cell index="0" delay="4">
          <spr name="/attack_sword/0" x="-7" y="-26" z="0"/>
        </cell>
        <cell index="1" delay="4">
          <spr name="/attack_sword/1" x="-8" y="-24" z="0"/>
        </cell>
        <cell index="2" delay="4">
          <spr name="/attack_sword/2" x="2" y="-24" z="0"/>
        </cell>
        <cell index="3" delay="4">
          <spr name="/attack_sword/3" x="2" y="-24" z="0"/>
        </cell>
        <cell index="4" delay="4">
          <spr name="/attack_sword/4" x="18" y="-24" z="0"/>
        </cell>
      </anim>
      <anim name="walk" loops="0">
        <cell index="0" delay="4">
          <spr name="/walk/0" x="-2" y="-31" z="0"/>
        </cell>
        <cell index="1" delay="4">
          <spr name="/walk/1" x="-3" y="-31" z="0"/>
        </cell>
        <cell index="2" delay="4">
          <spr name="/walk/2" x="-3" y="-31" z="0"/>
        </cell>
        <cell index="3" delay="4">
          <spr name="/walk/1" x="-3" y="-31" z="0"/>
        </cell>
      </anim>
    </animations>


command::

    python dfe_to_tp.py barbarian.anim barbarian.json


barbarian.json::

    {
        "frames": {
            "attack0": {
                "frame": {
                    "h": 51,
                    "w": 46,
                    "x": 199,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 51,
                    "w": 46
                },
                "spriteSourceSize": {
                    "h": 51,
                    "w": 46,
                    "x": 192,
                    "y": -26
                },
                "trimmed": true
            },
            "attack1": {
                "frame": {
                    "h": 48,
                    "w": 48,
                    "x": 248,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 48,
                    "w": 48
                },
                "spriteSourceSize": {
                    "h": 48,
                    "w": 48,
                    "x": 240,
                    "y": -24
                },
                "trimmed": true
            },
            "attack2": {
                "frame": {
                    "h": 48,
                    "w": 28,
                    "x": 299,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 48,
                    "w": 28
                },
                "spriteSourceSize": {
                    "h": 48,
                    "w": 30,
                    "x": 299,
                    "y": -24
                },
                "trimmed": true
            },
            "attack3": {
                "frame": {
                    "h": 48,
                    "w": 29,
                    "x": 330,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 48,
                    "w": 29
                },
                "spriteSourceSize": {
                    "h": 48,
                    "w": 31,
                    "x": 330,
                    "y": -24
                },
                "trimmed": true
            },
            "attack4": {
                "frame": {
                    "h": 48,
                    "w": 60,
                    "x": 0,
                    "y": 69
                },
                "rotated": false,
                "sourceSize": {
                    "h": 48,
                    "w": 60
                },
                "spriteSourceSize": {
                    "h": 48,
                    "w": 78,
                    "x": 0,
                    "y": 45
                },
                "trimmed": true
            },
            "stand0": {
                "frame": {
                    "h": 62,
                    "w": 32,
                    "x": 0,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 62,
                    "w": 32
                },
                "spriteSourceSize": {
                    "h": 62,
                    "w": 32,
                    "x": 0,
                    "y": -31
                },
                "trimmed": true
            },
            "walk0": {
                "frame": {
                    "h": 62,
                    "w": 28,
                    "x": 35,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 62,
                    "w": 28
                },
                "spriteSourceSize": {
                    "h": 62,
                    "w": 28,
                    "x": 33,
                    "y": -31
                },
                "trimmed": true
            },
            "walk1": {
                "frame": {
                    "h": 62,
                    "w": 27,
                    "x": 66,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 62,
                    "w": 27
                },
                "spriteSourceSize": {
                    "h": 62,
                    "w": 27,
                    "x": 60,
                    "y": -62
                },
                "trimmed": true
            },
            "walk2": {
                "frame": {
                    "h": 62,
                    "w": 27,
                    "x": 96,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 62,
                    "w": 27
                },
                "spriteSourceSize": {
                    "h": 62,
                    "w": 27,
                    "x": 93,
                    "y": -31
                },
                "trimmed": true
            },
            "walk3": {
                "frame": {
                    "h": 62,
                    "w": 27,
                    "x": 66,
                    "y": 0
                },
                "rotated": false,
                "sourceSize": {
                    "h": 62,
                    "w": 27
                },
                "spriteSourceSize": {
                    "h": 62,
                    "w": 27,
                    "x": 60,
                    "y": -62
                },
                "trimmed": true
            }
        },
        "meta": {
            "app": "https://github.com/adamlwgriffiths/dfe_to_tp",
            "image": "barbarian.png",
            "scale": "1",
            "size": {
                "h": "581",
                "w": "390"
            }
        }
    }


Known issues
============

* Sprite sizes are 1:1, edit the JSON to change per frame sizes.
* per-frame 'delay' is ignored (TexturePacker limitation).
* Frames are not exported in order (Python issue).


Author
======

* `Adam Griffiths <https://github.com/adamlwgriffiths>`_
